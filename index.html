<html>
  <head>
    <style>
      .wrapped {
        overflow-wrap: break-word;
      }
    </style>
    <script src="big-number.js"></script>
    <script>
      const number = localStorage.getItem("num") ? BigNumber.retrieve(localStorage.getItem("num")) : new BigNumber();
      if (number.chunks === 1 && number.head.value <= 1) {
        number.head.value = 2;
      }
      
      function iterate() {
        requestAnimationFrame(loop);
        
        const n = number.copy();
        do {
          number.apply3n1();
          const comp = number.compare(n);
          if (comp === 0) {
            console.log("cycle: ", number.toString());
            return;
          } else if (comp < 1) {
              break;
          }
        } while(true);
        number.increment();
        
        document.getElementById("increment-div").textContent = number.toString();
      }
      
      function loop() {
        iterate();
      }
      
      document.addEventListener("DOMContentLoaded", () => {
        loop(0);
      });
    </script>
  </head>

  <body>
    <div class="wrapped" id="increment-div"></div>
    
  </body>
</html>
